# FesFolio Timetable Viewer

ローカル環境で動作するイベントタイムテーブルビューアです。JSONファイルを読み込み、ステージごとにスケジュールを可視化します。

## 🎯 概要

- **完全オフライン動作**: ブラウザだけで動作し、サーバー不要
- **スキーマ検証**: JSONの妥当性を自動チェック
- **柔軟な表示**: ステージ絞り込み、出演者検索
- **ドラッグ＆ドロップ**: 簡単なファイル読み込み

## 🚀 使い方

### 基本的な使い方

1. **ビューアを開く**
   - `index.html` をブラウザで開く（Chrome/Edge/Firefox 推奨）

2. **JSONファイルを読み込む**
   - ページ上にJSONファイルをドラッグ＆ドロップ、または
   - 「JSONファイルを選択」ボタンからファイルを選択

3. **タイムテーブルを確認**
   - スキーマ検証結果とイベント概要が表示されます
   - ステージごとにタイムテーブルがレンダリングされます

4. **表示をカスタマイズ**
   - ステージ絞り込み: 特定のステージのみ表示
   - 検索機能: 出演者名で絞り込み

## 📋 機能詳細

### JSONスキーマ検証

- CDN経由でAJVライブラリを読み込み、`schemas/event.schema.json` を使用して検証
- 検証エラーがある場合は詳細なエラーメッセージを表示
- `file://` での取得が失敗した場合は警告メッセージを表示

### 表示仕様

- 開始時刻が設定されている枠は時系列順に表示
- 開始時刻が不明な枠は下部にまとめて表示
- 各枠にはタイプ別のアイコンを表示（ライブ、特典会、物販など）

## 📂 ファイル構成

```
viewer/
├── index.html       # ビューア本体（UI構造）
├── style.css        # スタイルシート（レイアウト・テーマ）
├── app.js          # ロジック（ファイル読込・検証・レンダリング）
└── README.md       # このファイル
```

## 🔧 技術仕様

### 使用ライブラリ

- **AJV (Another JSON Validator)**: JSONスキーマ検証
  - CDN: `https://cdn.jsdelivr.net/npm/ajv@8/dist/ajv.min.js`

### ブラウザ対応

- Chrome/Edge: 最新版推奨
- Firefox: 最新版推奨
- Safari: 最新版対応

### セキュリティ制限

- `file://` プロトコルで開いた場合、CORSポリシーにより外部ファイルの読み込みが制限されることがあります
- この場合、ドラッグ＆ドロップでファイルを読み込むか、ローカルHTTPサーバーを使用してください

## トラブルシューティング

### JSONが読み込めない

- ファイル形式が正しいか確認（`.json` 拡張子）
- JSONの構文エラーがないか確認（カンマの過不足、クォートの閉じ忘れなど）
- スキーマ検証結果のエラーメッセージを確認

### スキーマ検証が実行されない

- ブラウザの開発者ツール（F12）でコンソールエラーを確認
- ローカルHTTPサーバーを使用して開いてみる
- インターネット接続を確認（AJVをCDNから取得するため）

### 表示が崩れる

- ブラウザのキャッシュをクリア
- 別のブラウザで試す
- `style.css` が正しく読み込まれているか確認

## 📝 関連ドキュメント

- [メインREADME](../README.md): プロジェクト全体の説明
- [Maker README](../maker/README.md): JSONファイル作成ツールの説明
- [イベントスキーマ](../schemas/event.schema.json): JSONファイルの仕様
- [サンプルJSON](../sample/sample-event.json): JSONファイルの記述例
